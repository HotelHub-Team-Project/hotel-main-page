services:
  # Management Frontend Service (Development)
  frontend-management-dev:
    build:
      context: ./hotel-management/frontend
      dockerfile: Dockerfile.dev
    container_name: hotel-frontend-management-dev
    ports:
      - "5174:5173"
    environment:
      - NODE_ENV=development
    volumes:
      # 소스 코드 hot reload를 위한 볼륨 마운트
      - ./hotel-management/frontend/src:/app/src
      - ./hotel-management/frontend/public:/app/public
      - ./hotel-management/frontend/index.html:/app/index.html
      - ./hotel-management/frontend/vite.config.js:/app/vite.config.js
      # node_modules는 컨테이너 것 사용
      - /app/node_modules
    depends_on:
      - backend-management-dev
    networks:
      - hotel-management-dev-network
    stdin_open: true
    tty: true

  # Management Backend Service (Development)
  backend-management-dev:
    build:
      context: ./hotel-management/backend
      dockerfile: Dockerfile.dev
    container_name: hotel-backend-management-dev
    ports:
      - "8081:8080"
    environment:
      - NODE_ENV=development
      - PORT=8080
    env_file:
      - ./hotel-management/backend/.env
    volumes:
      # 소스 코드 hot reload를 위한 볼륨 마운트
      - ./hotel-management/backend:/app
      # node_modules는 컨테이너 것 사용
      - /app/node_modules
    networks:
      - hotel-management-dev-network
    stdin_open: true
    tty: true

networks:
  hotel-management-dev-network:
    driver: bridge
